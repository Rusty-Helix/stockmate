{% extends "layouts/base.html" %}

{% load static %}

{% block title %} UI Datatables {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

	<div class="content">
		<div class="page-inner">
			<div class="page-header">
				<h4 class="page-title">策略卡池</h4>
				<ul class="breadcrumbs">
					<li class="nav-home">
						<a href="#">
							<!-- <i class="flaticon-home"></i> -->
							核心功能
						</a>
					</li>
					<li class="separator">
						<i class="flaticon-right-arrow"></i>
					</li>
					<li class="nav-item">
						<a href="#">策略圖鑑</a>
					</li>
					<li class="separator">
						<i class="flaticon-right-arrow"></i>
					</li>
					<li class="nav-item">
						<a href="#">策略卡池</a>
					</li>
				</ul>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<div class="card" style="flex-direction: column">
						<div class="card-header" style="flex-direction: row">
									<div class="form-group">
										<!-- <label class="form-label">策略篩選器</label><br> -->

										<button
											type="submit" class="btn btn-primary"
											style="border-radius: 6px !important; margin-right: 8px !important;">
											<span class="btn-label">
												<i class="fa fa-filter" style="border-radius: 6px !important; width: 18px !important;"></i>
											</span>
											篩選
										</button>
										
										<div class="selectgroup selectgroup-pills">
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-candlestick-pattern" value="filter-candlestick-pattern" class="selectgroup-input" checked>
												<span class="selectgroup-button">K線型態</span>
											</label>
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-index-trend" value="filter-index-trend" class="selectgroup-input" checked>
												<span class="selectgroup-button">指標趨勢</span>
											</label>
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-index-value" value="filter-trend-value" class="selectgroup-input" checked>
												<span class="selectgroup-button">指標數值</span>
											</label>
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-strategic-stop" value="filter-strategic-stop" class="selectgroup-input" checked>
												<span class="selectgroup-button">停損停利</span>
											</label>
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-buy" value="filter-buy" class="selectgroup-input" checked>
												<span class="selectgroup-button buy">買進</span>
											</label>
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-sell" value="filter-sell" class="selectgroup-input" checked>
												<span class="selectgroup-button sell">賣出</span>
											</label>
											<label class="selectgroup-item">
												<input type="checkbox" name="filter-wait" value="filter-wait" class="selectgroup-input" checked>
												<span class="selectgroup-button wait">等待</span>
											</label>

										</div>
										<button type="button" class="btn btn-outline-light btn-lg" id="alert_demo_5" style="float: right !important; border-radius: 7px !important;">創建策略卡組</button>		
										<!-- <button type="button" class="btn btn-primary btn-lg" id="alert_demo_5" style="float: right !important; border-radius: 6px !important; border-color: #000000 !important; background: #000065 !important;">創建策略卡組</button>		 -->
									</div>


							<!-- <div>
								<p class="card-title">所有策略卡</p>
							</div> -->

							<!-- <div class="">
								<a href="#" class="btn btn-dark btn-block">{{strategy.title}}</a>
							</div> -->
							
						</div>
						<div class="card-body">
							<div class="table-responsive">
								<!-- <label class="form-label">Image Check</label> -->
								<div class='row'>
									{% for strategy in strategies %}
									<div class="col-lg-2">
										<div class="card card-profile">
											<div class="card-header" style="background-image: url('/static/assets/img/question-mark.jpg')">
												<label class="imagecheck" style="height: 100%; width:100%">
													<input name="imagecheck" type="checkbox" value={{strategy.id}} class="imagecheck-input">
													<figure class="imagecheck-figure" style="width:100%; height: 100%">
														<img src={{strategy.cover}} width="100%" height="100%" alt="...">
													</figure> 
												</label>
											</div>
											<div class="card-body">
												<div class="user-profile text-center">
													<!-- <div class="name">{{strategy.title}}</div> -->
													<!-- <div class="job">Frontend Developer</div>
													<div class="desc">A man who hates loneliness</div> -->
													<!-- <div class="social-media">
														<a class="btn btn-info btn-twitter btn-sm btn-link" href="#"> 
															<span class="btn-label just-icon"><i class="flaticon-twitter"></i> </span>
														</a>
														<a class="btn btn-danger btn-sm btn-link" rel="publisher" href="#"> 
															<span class="btn-label just-icon"><i class="flaticon-google-plus"></i> </span> 
														</a>
														<a class="btn btn-primary btn-sm btn-link" rel="publisher" href="#"> 
															<span class="btn-label just-icon"><i class="flaticon-facebook"></i> </span> 
														</a>
														<a class="btn btn-danger btn-sm btn-link" rel="publisher" href="#"> 
															<span class="btn-label just-icon"><i class="flaticon-dribbble"></i> </span> 
														</a>
													</div> -->
													<div class="view-profile">
														<a href="#" class="btn btn-dark btn-block">{{strategy.title}}</a>
													</div>
												</div>
											</div>
											<div class="card-footer">
												<div class="row user-stats text-center">
													<div class="col">
														<!-- <div class="number">125</div> -->
														{% if strategy.strategyType == 'candlestick pattern' %}
														<div class="title">K線</div>
														{% elif strategy.strategyType == 'index value' %}
														<div class="title">數值</div>
														{% elif strategy.strategyType == 'index trend' %}
														<div class="title">趨勢</div>
														{% elif strategy.strategyType == 'strategic stop' %}
														<div class="title">停損</div>
														{% else %}
														<div class="title">未分類</div>
														{% endif %}
													</div>
													<div class="col">
														<!-- <div class="number">25K</div> -->
														{% if strategy.signalType == 'buy' %}
														<div class="title">買進</div>
														{% elif strategy.signalType == 'sell' %}
														<div class="title">賣出</div>
														{% elif strategy.signalType == 'non' %}
														<div class="title">等待</div>
														{% endif %}
													</div>
												</div>
											</div>
										</div>
									</div>

									{% endfor %}
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

	<!-- Atlantis DEMO methods, don't include it in your project! -->
	<script src="/static/assets/js/setting-demo2.js"></script>
	<script >

				//== Class definition
		var SweetAlert2Demo = function() {

			//== Demos
			var initDemos = function() {
				//== Sweetalert Demo 1
				$('#alert_demo_1').click(function(e) {
					swal('Good job!', {
						buttons: {        			
							confirm: {
								className : 'btn btn-success'
							}
						},
					});
				});

				//== Sweetalert Demo 2
				$('#alert_demo_2').click(function(e) {
					swal("Here's the title!", "...and here's the text!", {
						buttons: {        			
							confirm: {
								className : 'btn btn-success'
							}
						},
					});
				});

				//== Sweetalert Demo 3
				$('#alert_demo_3_1').click(function(e) {
					swal("Good job!", "You clicked the button!", {
						icon : "warning",
						buttons: {        			
							confirm: {
								className : 'btn btn-warning'
							}
						},
					});
				});

				$('#alert_demo_3_2').click(function(e) {
					swal("Good job!", "You clicked the button!", {
						icon : "error",
						buttons: {        			
							confirm: {
								className : 'btn btn-danger'
							}
						},
					});
				});

				$('#alert_demo_3_3').click(function(e) {
					swal("Good job!", "You clicked the button!", {
						icon : "success",
						buttons: {        			
							confirm: {
								className : 'btn btn-success'
							}
						},
					});
				});

				$('#alert_demo_3_4').click(function(e) {
					swal("Good job!", "You clicked the button!", {
						icon : "info",
						buttons: {        			
							confirm: {
								className : 'btn btn-info'
							}
						},
					});
				});

				//== Sweetalert Demo 4
				$('#alert_demo_4').click(function(e) {
					swal({
						title: "Good job!",
						text: "You clicked the button!",
						icon: "success",
						buttons: {
							confirm: {
								text: "Confirm Me",
								value: true,
								visible: true,
								className: "btn btn-success",
								closeModal: true
							}
						}
					});
				});

				$('#alert_demo_5').click(function(e){
					swal({
						title: '策略卡組名稱',
						html: '<br><input class="form-control" placeholder="輸入卡組名稱" id="input-field">',
						content: {
							element: "input",
							attributes: {
								placeholder: "輸入卡組名稱",
								type: "text",
								id: "input-field",
								className: "form-control"
							},
						},
						buttons: {
							cancel: {
								visible: false,
								className: 'btn btn-danger'
							},        			
							confirm: {
								className : 'btn btn-success'
							}
						},
					}).then(
					function() {
						swal("", "建立新策略卡組: " + $('#input-field').val(), "success");
					}
					);
				});

				$('#alert_demo_6').click(function(e) {
					swal("This modal will disappear soon!", {
						buttons: false,
						timer: 3000,
					});
				});

				$('#alert_demo_7').click(function(e) {
					swal({
						title: 'Are you sure?',
						text: "You won't be able to revert this!",
						type: 'warning',
						buttons:{
							confirm: {
								text : 'Yes, delete it!',
								className : 'btn btn-success'
							},
							cancel: {
								visible: true,
								className: 'btn btn-danger'
							}
						}
					}).then((Delete) => {
						if (Delete) {
							swal({
								title: 'Deleted!',
								text: 'Your file has been deleted.',
								type: 'success',
								buttons : {
									confirm: {
										className : 'btn btn-success'
									}
								}
							});
						} else {
							swal.close();
						}
					});
				});

				$('#alert_demo_8').click(function(e) {
					swal({
						title: 'Are you sure?',
						text: "You won't be able to revert this!",
						type: 'warning',
						buttons:{
							cancel: {
								visible: true,
								text : 'No, cancel!',
								className: 'btn btn-danger'
							},        			
							confirm: {
								text : 'Yes, delete it!',
								className : 'btn btn-success'
							}
						}
					}).then((willDelete) => {
						if (willDelete) {
							swal("Poof! Your imaginary file has been deleted!", {
								icon: "success",
								buttons : {
									confirm : {
										className: 'btn btn-success'
									}
								}
							});
						} else {
							swal("Your imaginary file is safe!", {
								buttons : {
									confirm : {
										className: 'btn btn-success'
									}
								}
							});
						}
					});
				})

			};

			return {
				//== Init
				init: function() {
					initDemos();
				},
			};
		}();

		//== Class Initialization
		jQuery(document).ready(function() {
			SweetAlert2Demo.init();
		});

		$(document).ready(function() {
			$('#basic-datatables').DataTable({
			});

			$('#multi-filter-select').DataTable( {
				"pageLength": 5,
				initComplete: function () {
					this.api().columns().every( function () {
						var column = this;
						var select = $('<select class="form-control"><option value=""></option></select>')
						.appendTo( $(column.footer()).empty() )
						.on( 'change', function () {
							var val = $.fn.dataTable.util.escapeRegex(
								$(this).val()
								);

							column
							.search( val ? '^'+val+'$' : '', true, false )
							.draw();
						} );

						column.data().unique().sort().each( function ( d, j ) {
							select.append( '<option value="'+d+'">'+d+'</option>' )
						} );
					} );
				}
			});

			// Add Row
			$('#add-row').DataTable({
				"pageLength": 5,
			});

			var action = '<td> <div class="form-button-action"> <button type="button" data-toggle="tooltip" title="" class="btn btn-link btn-primary btn-lg" data-original-title="Edit Task"> <i class="fa fa-edit"></i> </button> <button type="button" data-toggle="tooltip" title="" class="btn btn-link btn-danger" data-original-title="Remove"> <i class="fa fa-times"></i> </button> </div> </td>';

			$('#addRowButton').click(function() {
				$('#add-row').dataTable().fnAddData([
					$("#addName").val(),
					$("#addPosition").val(),
					$("#addOffice").val(),
					action
					]);
				$('#addRowModal').modal('hide');

			});
		});
	</script>

{% endblock javascripts %}
